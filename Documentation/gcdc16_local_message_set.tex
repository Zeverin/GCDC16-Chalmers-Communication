% Created 2015-08-16 Sun 11:06
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{fixltx2e}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\author{Albin Severinson}
\date{\today}
\title{GCDC16 Local Message Set}
\hypersetup{
 pdfauthor={Albin Severinson},
 pdftitle={GCDC16 Local Message Set},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 24.4.1 (Org mode 8.3.1)}, 
 pdflang={English}}
\begin{document}

\maketitle
\tableofcontents

\begin{center}
\begin{tabular}{lrl}
Version: & 0.1 & First draft\\
 & 0.2 & Revised CAM and added DENM\\
 &  & \\
\end{tabular}
\end{center}

\newpage
\section{Introduction}
\label{sec:orgheadline1}
This document presents the local message set (LMS) to be used for
GCDC16. LMS will be used by the sensor fusion system to generate CAM
messages, and by the scenario control models to generate DENM/iGAME
messages.

The communication stack includes a vehicle adapter that will receive
these messages and use them to create proper CAM/DENM/iGAME messages
that will be forwarded to other vehicles. The LMS follows the ETSI
specification as closely as possible, but makes some changes to make
is possible to create the messages in Simulink.

Different network ports will be used for CAM/DENM/iGAME messages in
order to distinguish them.

All data is in network byte order, which is identical to big endian.

\section{CAM}
\label{sec:orgheadline2}
CAM consists of a single large message that is sent to the
communication stack periodically. The communication stack will pick up
the message and make a decision on what parts of the message to forward
to other vehicles. The message should contain the specified data, in
the specified order. Data marked as N/A should be all zeroes.

\begin{center}
\begin{tabular}{rll}
\hline
Bytes: & Data: & Notes\\
\hline
1 & header & More details?\\
4 & GenerationDeltaTime & See D3.2\\
0 & Station ID & Handled by communication SW\\
1 & Station Type & See D3.2\\
1 & Vehicle Role & See D3.2\\
2 & Vehicle Length & See D3.2\\
2 & Vehicle Width & See D3.2\\
0 & Reference position & See D3.2\\
4 & Latitude & See D3.2\\
4 & Longitude & See D3.2\\
? & Position Confidence Ellipse 95\% & Need more details\\
? & Altitude & Not in D3.2?\\
2 & Heading & See D3.2\\
1 & Heading confidence 95\% & See D3.2\\
2 & Speed & See D3.2\\
1 & Speed Confidence 95\% & See D3.2\\
2 & Yaw Rate & See D3.2\\
1 & Yaw Rate Confidence 95\% & See D3.2\\
2 & Longitudinal vehicle acceleration & See D3.2\\
1 & Longitudinal vehicle acceleration confidence 95\% & See D3.2\\
 &  & \\
\end{tabular}
\end{center}



\section{DENM}
\label{sec:orgheadline3}
DENM messages are sent on-demand. D3.2 describes four different DENM
messages, but due to how DENM messages are structured with several
data containers in every message, it turns out that there are only two
distinct messages.

The LMS for DENM messages follows the specification very loosely as
it's not worth the time to implement the full standard when only two
distinct messages are used. 

The first message is used to notify the vehicles in scenario one that
there are roadworks ahead, and what lanes is blocked because of that.
The second message is used to notify the vehicles in scenario three
that there's en emergency vehicle coming, and what lane it is
requesting.


DENM messages.
\begin{itemize}
\item Should station ID be added to messages?
\begin{itemize}
\item Maybe better for the communication box to handle this?
\end{itemize}
\end{itemize}
\begin{center}
\begin{tabular}{llrl}
\hline
DENM Message: & Data: & Bytes: & Notes::\\
\hline
Roadworks & Message ID & 1 & \(=38\)\\
 & Reference Time & 8 & \\
 & Event Type & 0 & \\
 & Cause Code & 1 & \\
 & Sub Cause Code & 1 & \\
 & Closed Lanes & 0 & \\
 & Driving Lane Status & 1 & \\
\hline
Emergency Vehicle & Message ID & 1 & \(=40\)\\
 & Reference Time & 8 & \\
 & Event Type & 1 & \\
 & Cause Code & 1 & \\
 & Sub Cause Code & 1 & \\
 & Lane Position & 1 & \\
 &  &  & \\
\end{tabular}
\end{center}



\section{iGAME}
\label{sec:orgheadline4}
The iGAME message set is still under proposal. Details on this set
will be presented in a future release of this document. As it looks
now the structure is very similar to DENM, but the details on how
these are to be transmitted is unclear.
\end{document}
